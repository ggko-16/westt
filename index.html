<!DOCTYPE html>
<html lang="ka">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WestFace</title>
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
<link rel="stylesheet" href="./style.css">
</head>
<body>

<header>
    <nav>
        <div class="logo"><a href="index.html">WestFace</a></div>
        <div class="burger-menu" id="burgerMenu"><span></span><span></span><span></span></div>
        <ul class="nav-links" id="navLinks">
            <li><a href="#home">მთავარი</a></li>
            <li><a href="#services">სერვისები</a></li>
            <li><a href="#prices">ფასები</a></li>
            <li><a href="#gallery">გალერეა</a></li>
            <li><a href="#team">გუნდი</a></li>
            <li><a href="#order">შეკვეთა</a></li>
            <li><a href="#contact">კონტაქტი</a></li>
        </ul>
    </nav>
</header>

<section id="home" class="hero">
    <h1>პროფესიონალური ფოტოების ბეჭდვა</h1>
    <p>ვამზადებთ მაღალი ხარისხის პოსტერებს და ვბეჭდავთ ფოტოებს ნებისმიერ ზომაზე</p>
    <a href="#order" class="cta-button">ონლაინ შეკვეთა</a>
</section>

<section id="services">
    <h2>ჩვენი სერვისები</h2>
    <div class="services-grid">
        <div class="service-card">
            <div class="service-icon">🖼️</div>
            <h3>პოსტერების დამზადება</h3>
            <p>მაღალი ხარისხის პოსტერები ნებისმიერი ზომით და დიზაინით. თქვენი იდეები ცხოვრებას ვაჩენთ.</p>
        </div>
        <div class="service-card">
            <div class="service-icon">📷</div>
            <h3>ფოტოების ბეჭდვა</h3>
            <p>ვბეჭდავთ ფოტოებს სხვადასხვა ზომაზე - პატარა ფორმატიდან დიდ ზომამდე.</p>
        </div>
        <div class="service-card">
            <div class="service-icon">🎨</div>
            <h3>დიზაინის მომსახურება</h3>
            <p>პროფესიონალური დიზაინის შექმნა თქვენი საჭიროებების მიხედვით.</p>
        </div>
    </div>
</section>

<section id="prices" style="background:#f8f9fa;">
    <h2>ფასები</h2>
    <div id="price-tables" class="price-tables"></div>
</section>

<section id="gallery">
    <h2>ჩვენი სამუშაოები</h2>
    <div id="gallery-grid" class="gallery-grid"></div>
</section>

<section id="team">
    <h2>ჩვენი გუნდი</h2>
    <div id="team-grid" class="team-grid"></div>
</section>

<section id="order">
    <h2>შეკვეთა</h2>
    <div class="delivery-info">
        <h3>🚚 მიწოდება</h3>
        <div class="delivery-card">
            <p><strong>თბილისში:</strong> უფასო მიწოდება</p>
            <p><strong>რეგიონებში:</strong> +10-15₾</p>
        </div>
    </div>
</section>

<section id="order-form" style="background:#f8f9fa;">
    <h2>ონლაინ შეკვეთა</h2>
    <div style="max-width:800px;margin:0 auto;background:white;padding:2rem;border-radius:15px;box-shadow:0 5px 15px rgba(0,0,0,0.1);display:flex;align-items:center;flex-direction:column;gap:15px;">
        <h4>შესაკვეთად, ფოტოს გამოგზავნისთვის დააჭირეთ გამოგზავნის ღილაკს</h4>
        <a href="https://docs.google.com/forms/d/e/1FAIpQLSf6JAXeVfGSjVxEPvaqJHKkbMlgD2f5MffAT7EAY7zp0vQoeg/viewform?usp=dialog" target="_blank" rel="noopener noreferrer" class="form-btn">
            გამოგზავნეთ
        </a>
    </div>
</section>

<section id="contact">
    <h2>დაგვიკავშირდით</h2>
    <div class="contact-info">
        <div class="contact-item">
            <h3>📞 ტელეფონი</h3>
            <p id="contact-phone"></p>
        </div>
        <div class="contact-item">
            <h3>✉️ ელ-ფოსტა</h3>
            <p id="contact-email"></p>
        </div>
        <div class="contact-item">
            <h3>📍 მისამართი</h3>
            <p id="contact-address"></p>
        </div>
    </div>
</section>

<footer>
    <p>&copy; 2026 WestFace Shop. ყველა უფლება დაცულია.</p>
</footer>

<script>
const burgerMenu = document.getElementById('burgerMenu');
const navLinks = document.getElementById('navLinks');
burgerMenu.addEventListener('click', () => { navLinks.classList.toggle('active'); burgerMenu.classList.toggle('active'); });
navLinks.querySelectorAll('a').forEach(link => link.addEventListener('click', () => { navLinks.classList.remove('active'); burgerMenu.classList.remove('active'); }));

document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if(target){
            const offset = target.getBoundingClientRect().top + window.pageYOffset - 80;
            window.scrollTo({top:offset, behavior:'smooth'});
        }
    });
});

// Load CMS data
async function loadJSON(path){ const res = await fetch(path); return await res.json(); }

async function loadContact(){
    const data = await loadJSON('/content/contact.json');
    document.getElementById('contact-phone').innerText = data.phone;
    document.getElementById('contact-email').innerText = data.email;
    document.getElementById('contact-address').innerText = data.address;
}
async function loadTeam(){
    const data = await loadJSON('/content/team.json');
    const grid = document.getElementById('team-grid');
    data.members.forEach(m=>{
        const div=document.createElement('div'); div.classList.add('team-member');
        div.innerHTML=`<div class="team-photo">${m.photo?`<img src="${m.photo}" alt="${m.name}" style="width:100%;border-radius:50%">`:'👤'}</div>
                       <h3>${m.name}</h3><p>${m.position}</p>`;
        grid.appendChild(div);
    });
}
async function loadGallery(){
    const grid = document.getElementById('gallery-grid');

    // თუ გალერეა ცალკეული JSON ფაილებია content/gallery-ში
    // მაგალითად, 1.json, 2.json, ...
    const files = ['content/gallery/1.json', 'content/gallery/2.json', 'content/gallery/3.json']; // ჩამატე ყველა ფაილი აქ
    for(const file of files){
        const item = await loadJSON('/' + file);
        const div = document.createElement('div');
        div.classList.add('gallery-item');
        div.innerHTML = `<img src="${item.image}" alt="${item.title}">`;
        grid.appendChild(div);
    }
}

async function loadPrices(){
    const container = document.getElementById('price-tables');
    const files = ['/content/prices/photo.json','/content/prices/printing.json','/content/prices/frames.json'];
    for(const file of files){
        const data = await loadJSON(file);
        const div = document.createElement('div'); div.classList.add('price-table');
        const title = file.includes('photo')?'📸 ფოტო სერვისები':file.includes('printing')?'🖨️ სკანირება და ბეჭდვა':'🖼️ ჩარჩოები';
        div.innerHTML = `<h3>${title}</h3><table>${data.services.map(s=>`<tr><td>${s.name}</td><td class="price">${s.price}</td></tr>`).join('')}</table>`;
        container.appendChild(div);
    }
}

document.addEventListener('DOMContentLoaded', ()=>{
    loadContact();
    loadTeam();
    loadGallery();
    loadPrices();
});
</script>

<script>
if(window.netlifyIdentity){
    window.netlifyIdentity.on("init", user=>{
        if(!user){
            window.netlifyIdentity.on("login", ()=>{ document.location.href="/admin/"; });
        }
    });
}
</script>

</body>
</html>
